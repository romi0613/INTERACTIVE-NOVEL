<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ENDING C — 마지막 선택</title>

  <!-- 폰트 -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/>

  <style>
    :root{
      --bg:#040307;
      --bg2:#120815;
      --ink:#f5f0e6;
      --muted:#b8a9a0;
      --accent:#ff7f7f;        /* C엔딩: 붉은 희생 느낌 */
      --accent-soft:#ffb3a0;
      --accent-deep:#ff4b4b;
      --stroke:#ffffff22;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(circle at 0% 0%, #4a1e28 0, #050307 40%, #020103 100%);
      color:var(--ink);
      font-family:'Pretendard Variable',Pretendard,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .page{
      width:min(1040px, 96vw);
      max-height:94vh;
      border-radius:22px;
      border:1px solid var(--stroke);
      background:
        radial-gradient(circle at 0% 0%, #482128 0, #0a050d 45%, #050308 100%);
      box-shadow:
        0 28px 90px rgba(0,0,0,.9),
        0 0 42px rgba(255,100,100,.18);
      padding:26px clamp(22px,3.5vw,32px) 22px;
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }

    /* ===== 상단 헤더 ===== */
    .page-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:18px;
      margin-bottom:18px;
    }
    .brand-title{
      font-size:clamp(20px,2.6vw,26px);
      letter-spacing:.42em;
      text-indent:.42em;
      font-weight:800;
      color:var(--accent-soft);
      text-shadow:0 0 18px rgba(255,150,150,.85);
      white-space:nowrap;
    }
    .brand-sub{
      margin-top:4px;
      font-size:.76rem;
      letter-spacing:.2em;
      text-transform:uppercase;
      color:var(--muted);
    }
    .meta-right{
      text-align:right;
      font-size:.75rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      color:var(--muted);
    }
    .meta-right .hl{
      margin-top:4px;
      color:var(--accent-soft);
    }

    /* ===== 본문 레이아웃 ===== */
    .body-grid{
      flex:1;
      display:grid;
      grid-template-columns: minmax(0,2.1fr) minmax(0,1.6fr);
      gap:18px;
      padding:20px clamp(18px,3vw,26px);
      border-radius:16px;
      border:1px solid #ffffff1f;
      background:radial-gradient(circle at 15% 0%, #3a2624 0, #120910 38%, #070509 100%);
      overflow:auto;
    }

    /* 왼쪽 메인 */
    .eyebrow{
      font-size:.78rem;
      letter-spacing:.28em;
      text-transform:uppercase;
      color:var(--muted);
      margin-bottom:4px;
    }
    h1{
      margin:0 0 4px;
      font-size:1.6rem;
      color:var(--accent);
    }
    .status-line{
      font-size:.8rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#e2d2c9;
      margin-bottom:14px;
    }
    .status-line span{
      color:var(--accent-soft);
    }

    .summary{
      font-size:.96rem;
      line-height:1.9;
      color:var(--ink);
    }
    .summary p{margin:.45em 0;}
    .summary p.lead{
      font-size:1.02rem;
      color:#f9efe3;
    }

    /* (4) 하이라이트 대사 */
    .quote-block{
      margin-top:16px;
      padding:10px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.18);
      background:linear-gradient(135deg,rgba(0,0,0,.4),rgba(120,40,40,.45));
      font-size:.95rem;
      line-height:1.8;
      position:relative;
      color:#ffe8e2;
    }
    .quote-block::before{
      content:"“";
      position:absolute;
      left:10px;
      top:2px;
      font-size:1.6rem;
      color:var(--accent-soft);
      opacity:.6;
    }

    /* (1) 선택 타임라인 */
    .route-box{
      margin-top:18px;
      padding:12px 14px;
      border-radius:12px;
      border:1px dashed rgba(255,255,255,.22);
      background:radial-gradient(circle at 0 0,rgba(255,255,255,.06) 0,rgba(0,0,0,.2) 55%);
      font-size:.88rem;
      color:var(--muted);
    }
    .route-box-title{
      font-size:.8rem;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:var(--accent-soft);
      margin-bottom:6px;
    }

    .route-timeline{
      list-style:none;
      margin:8px 0 6px;
      padding:0;
      position:relative;
    }
    .route-timeline::before{
      content:"";
      position:absolute;
      left:10px;
      top:4px;
      bottom:4px;
      width:1px;
      background:linear-gradient(to bottom,rgba(255,255,255,.35),rgba(255,255,255,.05));
    }
    .route-step{
      position:relative;
      padding-left:26px;
      margin:6px 0;
    }
    .route-step::before{
      content:"";
      position:absolute;
      left:6px;
      top:6px;
      width:8px;height:8px;
      border-radius:50%;
      background:radial-gradient(circle,#fff 0,var(--accent) 45%,#e03030 100%);
      box-shadow:0 0 8px rgba(255,120,120,.8);
    }
    .route-step-label{
      font-size:.78rem;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:#e7d5cf;
      margin-bottom:1px;
    }
    .route-step-text{
      font-size:.86rem;
      color:#cfc0b7;
    }

    .route-desc{
      margin-top:8px;
      font-size:.86rem;
    }
    .clear-count{
      margin-top:4px;
      font-size:.8rem;
      color:#e3c3c0;
    }

    /* 오른쪽 사이드 박스들 */
    .side-column{
      display:flex;
      flex-direction:column;
      gap:10px;
      font-size:.9rem;
    }
    .side-box{
      border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      background:radial-gradient(circle at 0 0,rgba(255,255,255,.04) 0,rgba(0,0,0,.4) 55%);
      padding:10px 12px 12px;
    }
    .side-title{
      font-size:.82rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:var(--accent-soft);
      margin-bottom:4px;
    }
    .side-body{
      font-size:.9rem;
      line-height:1.7;
      color:#e7d9d2;
    }

    /* (3) 장면/사운드 note 강조색 */
    .side-box.scene{
      border-color:rgba(255,130,130,.55);
      box-shadow:0 0 22px rgba(255,90,90,.18);
    }

    /* ===== 하단 버튼 ===== */
    .footer{
      margin-top:14px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .btn-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .btn{
      border-radius:999px;
      padding:8px 18px;
      font-size:.85rem;
      letter-spacing:.04em;
      cursor:pointer;
      border:1px solid #ffffff33;
      background:transparent;
      color:var(--ink);
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .btn.primary{
      background:var(--accent-deep);
      border-color:var(--accent-deep);
      color:#1b0d0b;
      font-weight:600;
    }
    .btn span.icon{
      font-size:.9rem;
    }
    .btn:hover{
      border-color:var(--accent-soft);
      box-shadow:0 0 18px rgba(255,150,150,.45);
    }
    .foot-note{
      font-size:.78rem;
      color:var(--muted);
    }

    @media (max-width:780px){
      body{padding:12px;}
      .page{padding:18px;}
      .body-grid{
        grid-template-columns:1fr;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- 상단 헤더 -->
    <header class="page-header">
      <div>
        <div class="brand-title">BANDERSNATCH</div>
        <div class="brand-sub">ENDING ARCHIVE</div>
      </div>
      <div class="meta-right">
        <div>INTERACTIVE NOVEL</div>
        <div class="hl">ENDING C · SACRIFICE</div>
      </div>
    </header>

    <!-- 메인 컨텐츠 -->
    <section class="body-grid">
      <!-- 왼쪽 메인 -->
      <div>
        <div class="eyebrow">ENDING C</div>
        <h1>마지막 선택</h1>
        <p class="status-line">
          STATUS · UNLOCKED · ROUTE DEPTH : <span>2</span>
        </p>

        <div class="summary">
          <p class="lead">
            도망칠 수 있었던 마지막 순간에, 당신은 뒤돌아서는 대신 남기로 결정했다.
          </p>
          <p>
            도살자 사건을 둘러싼 모든 증거는 이미 충분했다. 게임을 종료하고, 화면을 닫고,
            다시 평범한 일상으로 돌아갈 수 있는 버튼도 분명 존재했다. 하지만 이 루트에서
            당신은 그 모든 “탈출구”를 지나쳐, 기록 속 빈 칸을 스스로 채우는 쪽을 선택한다.
          </p>
          <p>
            사건이 끝난 뒤 남는 것은 영웅담이 아니라, 보고서의 각주에 적힌 한 줄이다.
            <em>“익명의 제보자가 모든 책임을 떠안겠다고 진술함.”</em> 이 엔딩에서 주인공은
            더 이상 플레이어의 아바타가 아니라, 타인의 안전을 위해 자신을 내어준 ‘마지막 변수’로 남는다.
          </p>
        </div>

        <!-- (4) 하이라이트 대사 -->
        <div class="quote-block">
          “내 이름으로 처리해요. 대신, 그 애는 어떤 기록에도 남기지 말아 주세요.”
        </div>

        <!-- (1 + 6) 선택 타임라인 + 클리어 카운트 -->
        <section class="route-box">
          <div class="route-box-title">ROUTE LOG · 당신이 밟아온 선택들</div>
          <ul class="route-timeline" id="routeTimeline">
            <!-- JS에서 채움 -->
          </ul>
          <p class="route-desc" id="routeSummary"></p>
          <p class="clear-count" id="clearCount"></p>
        </section>
      </div>

      <!-- 오른쪽 사이드 정보 -->
      <aside class="side-column">
        <!-- (3) 장면/사운드 연출 노트 -->
        <section class="side-box scene">
          <div class="side-title">SCENE / SOUND NOTE</div>
          <div class="side-body">
            <p>
              화면 전체가 서서히 어두워지며, 배경의 색이 붉은 갈색으로 번져 들어간다.
              심장 박동과 비슷한 저음이 아주 작게 반복되고, UI 요소들은 하나둘씩 비활성화된다.
            </p>
            <p>
              “되감기” 버튼은 희미한 잔상만 남기고 더 이상 클릭되지 않으며,
              커서를 올리면 짧은 진동 효과와 함께 <em>“선택 불가”</em> 툴팁이 뜬다.
              마지막 문장을 읽는 순간, 모든 효과음이 끊기고 단 한 번의 페이드 아웃으로 화면이 꺼진다.
            </p>
          </div>
        </section>

        <section class="side-box">
          <div class="side-title">WHAT THIS ENDING MEANS</div>
          <div class="side-body">
            <p>
              이 엔딩의 주인공은 “도망칠 수 있었지만 남아 있기로 한 사람”이다.
              도살자 사건은 해결되지만, 공로는 다른 이들의 몫으로 돌아가고
              스스로를 지워 버린 선택만이 조용히 남는다.
            </p>
            <p>
              플레이어 입장에서는 가장 손해 보는 루트처럼 보이지만,
              이야기의 구조를 바꾸는 것은 이런 비합리적인 선택들이다.
              다른 엔딩에서 등장하는 몇몇 조연의 대사와 행동은,
              이 C엔딩을 본 뒤 다시 보면 전혀 다른 뉘앙스로 읽히게 된다.
            </p>
          </div>
        </section>
      </aside>
    </section>

    <!-- 하단 버튼 -->
    <footer class="footer">
      <div class="btn-row">
        <button class="btn primary" onclick="location.href='Start.html'">
          <span class="icon">↺</span>
          처음부터 다시 시작
        </button>
        <button class="btn" onclick="location.href='지난선택.html'">
          <span class="icon">☷</span>
          지난 선택 보기
        </button>
        <button class="btn" onclick="location.href='참고.html'">
          <span class="icon">✦</span>
          엔딩 모음집
        </button>
      </div>
      <p class="foot-note">
        이 엔딩을 보면 <strong>ENDING C</strong>가 자동으로 해금되며,
        <em>지난 선택</em> 화면과 <em>엔딩 모음집</em>에서 확인할 수 있습니다.
      </p>
    </footer>
  </div>

  <script>
    // URL 파라미터 읽기
    function getParam(name){
      const params = new URLSearchParams(location.search);
      return params.get(name);
    }

    // (1) 각 path에 따른 선택 로그 & 요약
    const ROUTES = {
      AA:{
        steps:[
          {label:'CHOICE 1', text:'사건과 관련 없는 일상으로 돌아가려다, 결국 다시 조사에 개입했다.'},
          {label:'CHOICE 2', text:'도살자의 기록을 은폐하지 않고, 피해자의 이름을 끝까지 지켜 보았다.'},
          {label:'CHOICE 3', text:'마지막 보고서에서 모든 책임을 자신이 떠안겠다고 제안했다.'}
        ],
        summary:'처음에는 도망치려 했지만, 끝에서는 누구보다 깊게 사건에 관여한 루트입니다.'
      },
      AB:{
        steps:[
          {label:'CHOICE 1', text:'처음부터 사건을 정면으로 바라보며, 기록을 남기기로 했다.'},
          {label:'CHOICE 2', text:'결정적인 증거를 제출하는 대신, 자신이 연루될 위험을 감수했다.'},
          {label:'CHOICE 3', text:'마지막 선택에서 동료를 보호하기 위해 스스로를 희생하는 쪽을 택했다.'}
        ],
        summary:'애초부터 “옳다고 믿는 일”을 선택해 온 플레이가, 가장 큰 대가를 치르는 결말로 이어집니다.'
      },
      BA:{
        steps:[
          {label:'CHOICE 1', text:'초반에는 사건을 피하려 했지만, 주변 인물들이 무너지는 모습을 보고 마음을 바꿨다.'},
          {label:'CHOICE 2', text:'숨겨진 기록을 발견한 뒤, 사실을 묻어 버리는 대신 모두에게 공유했다.'},
          {label:'CHOICE 3', text:'마지막 장면에서 도망치는 대신, 실험의 전 과정을 증언하기로 결심했다.'}
        ],
        summary:'뒤늦게 개입했지만 그만큼 깊이 빠져들어, 결국 누구보다 무거운 선택을 담당하는 루트입니다.'
      },
      BB:{
        steps:[
          {label:'CHOICE 1', text:'처음부터 끝까지 거리를 두려 했지만, 우연한 선택들이 계속 사건과 엮였다.'},
          {label:'CHOICE 2', text:'도망칠 기회마다 망설였고, 결국 가장 위험한 순간에만 남게 되었다.'},
          {label:'CHOICE 3', text:'“어차피 누군가는 해야 할 일”이라며 마지막 서명을 대신했다.'}
        ],
        summary:'무책임하려고 했던 플레이가 역설적으로 가장 무거운 결말로 이어지는, 아이러니한 루트입니다.'
      }
    };

    document.addEventListener('DOMContentLoaded', () => {
      // (6) 엔딩 C 해금 + 클리어 횟수 증가
      localStorage.setItem('ending:ENDING_C','1');
      const keyCount = 'ending:ENDING_C_count';
      let count = parseInt(localStorage.getItem(keyCount) || '0', 10);
      count++;
      localStorage.setItem(keyCount, String(count));

      const clearCountEl = document.getElementById('clearCount');
      if(clearCountEl){
        if(count === 1){
          clearCountEl.textContent = '이번이 이 엔딩에 처음 도달한 기록입니다.';
        }else{
          clearCountEl.textContent = `지금까지 이 엔딩에 도달한 횟수: ${count}회`;
        }
      }

      // (1) path에 따라 선택 타임라인 채우기
      const path = getParam('path') || 'AB'; // 기본값 아무거나
      const data = ROUTES[path] || ROUTES['AB'];

      const listEl = document.getElementById('routeTimeline');
      const summaryEl = document.getElementById('routeSummary');

      if(listEl && data.steps){
        listEl.innerHTML = data.steps.map(step => `
          <li class="route-step">
            <div class="route-step-label">${step.label}</div>
            <div class="route-step-text">${step.text}</div>
          </li>
        `).join('');
      }
      if(summaryEl){
        summaryEl.textContent = data.summary;
      }
    });
  </script>
</body>
</html>
