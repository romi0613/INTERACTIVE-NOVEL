<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ì—”ë”© ëª¨ìŒì§‘ â€” BANDERSNATCH</title>

<!-- í°íŠ¸: ì œëª©ìš© í”½ì…€ / ë³¸ë¬¸ìš© Pretendard -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/>

<style>
  :root{
    --bg:#050505;
    --bg-grad-1:#11060a;
    --bg-grad-2:#3b1012;

    --ink:#f8f4ee;
    --muted:#b4aaa0;

    --accent:#ff4b4b;      /* ë¹¨ê°• í¬ì¸íŠ¸ */
    --accent-soft:#ffb36b; /* ì˜¤ë Œì§€ í¬ì¸íŠ¸ */
    --accent-yellow:#ffd75e;

    --chip-bg:#151013;
    --card-bg:#120d10;
    --stroke:#ffffff26;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    color:var(--ink);
    font-family:'Pretendard Variable',system-ui,-apple-system,BlinkMacSystemFont;
    background:
      radial-gradient(circle at 0 0, #3b1c22 0, var(--bg) 55%),
      radial-gradient(circle at 110% 120%, var(--bg-grad-2) 0, var(--bg) 55%);
  }

  /* ===== í—¤ë” ===== */
  header{
    padding:24px 32px 8px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
  }

  .title-wrap{
    text-align:center;
  }

  .title-main{
    font-family:'Press Start 2P','Share Tech Mono',monospace;
    font-size:clamp(14px,2.1vw,20px);
    letter-spacing:.25em;
    text-transform:uppercase;
    color:var(--accent-yellow);
    text-align:center;
    text-shadow:
      0 0 6px rgba(255,215,94,.9),
      0 0 18px rgba(255,120,80,.7);
  }
  .title-sub{
    margin-top:8px;
    font-size:.9rem;
    color:var(--muted);
    letter-spacing:.16em;
    text-align:center;
    text-transform:uppercase;
  }

  .back-btn{
    position:absolute;
    right:32px;
    top:50%;
    transform:translateY(-50%);
    background:none;
    border:1px solid var(--accent-soft);
    color:var(--accent-soft);
    font-size:.78rem;
    padding:6px 12px;
    border-radius:999px;
    cursor:pointer;
    display:flex;
    align-items:center;
    gap:6px;
  }
  .back-btn:hover{
    background:var(--accent-soft);
    color:#200c0c;
  }

  /* reset / unlock ë²„íŠ¼ */
  .reset-btn{
    position:absolute;
    left:24px;
    top:18px;
    padding:4px 14px;
    border-radius:999px;
    border:1px solid #ffffff33;
    background:transparent;
    color:#f5d6b7;
    font-size:10px;
    letter-spacing:.08em;
    text-transform:uppercase;
    cursor:pointer;
  }
  .reset-btn.unlock-btn{
    left:160px;
  }
  .reset-btn:hover{
    border-color:#ffffff66;
    color:#fde3c7;
  }

  /* ===== ìƒë‹¨ ìƒíƒœ ë°” ===== */
  .status-bar{
    max-width:1080px;
    margin:0 auto 20px;
    padding:0 28px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:.8rem;
    color:var(--muted);
  }

  .status-left{
    display:flex;
    align-items:center;
    gap:10px;
  }
  .status-dot{
    width:8px;height:8px;border-radius:50%;
    background:radial-gradient(circle at 30% 30%,#fff 0,var(--accent-soft) 40%,var(--accent) 100%);
    box-shadow:0 0 12px rgba(255,122,90,.9);
  }
  #endingProgress strong{
    color:var(--accent-soft);
  }

  .status-right span+span{
    margin-left:14px;
  }

  /* ===== ë©”ì¸ ===== */
  main{
    max-width:1080px;
    margin:0 auto 48px;
    padding:14px 28px 40px;
    position:relative;
  }

  .ending-list{
    position:relative;
    z-index:1;
    display:flex;
    flex-direction:column;
    gap:16px;
  }

  /* ì„¸ë¡œ ë¼ì¸ */
  .timeline{
    position:absolute;
    left:80px;
    top:0;
    bottom:0;
    border-left:1px dashed rgba(255,255,255,.12);
    pointer-events:none;
  }

  /* ===== ì—”ë”© ë¼ì¸ ===== */
  .ending-row{
    display:flex;
    align-items:flex-start;
    gap:20px;
    position:relative;
  }

  /* ì™¼ìª½ ì¹© */
  .ending-chip{
    flex:0 0 120px;
    height:64px;
    border-radius:14px;
    padding:10px 12px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    background:linear-gradient(135deg,#241318,var(--chip-bg));
    border:1px solid rgba(255,255,255,.14);
    position:relative;
  }
  .ending-chip::after{
    content:"";
    position:absolute;
    right:-18px;
    top:50%;
    width:18px;
    height:1px;
    background:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.6) 50%,rgba(255,255,255,0) 100%);
  }
  .chip-label{
    font-size:.72rem;
    letter-spacing:.18em;
    text-transform:uppercase;
    color:var(--muted);
  }
  .chip-code{
    margin-top:4px;
    font-size:1rem;
    letter-spacing:.22em;
    text-transform:uppercase;
    color:#f5f0e8;
  }

  .ending-row.unlocked .ending-chip{
    border-color:rgba(255,126,93,.9);
    box-shadow:0 0 18px rgba(255,126,93,.45);
  }
  .ending-row.unlocked .chip-code{
    color:var(--accent-soft);
  }
  .ending-row.locked .ending-chip{
    border-color:rgba(255,255,255,.08);
    color:#726a62;
  }

  /* ì˜¤ë¥¸ìª½ ì¹´ë“œ */
  .ending-card{
    flex:1;
    border-radius:18px;
    padding:12px 16px 14px;
    border:1px solid rgba(255,255,255,.18);
    background:
      radial-gradient(circle at 0 0,rgba(255,255,255,.08) 0,transparent 45%),
      linear-gradient(135deg,rgba(15,8,12,.98),rgba(9,5,8,.98));
    box-shadow:0 14px 36px rgba(0,0,0,.85);
    transition:border-color .2s, box-shadow .2s, transform .18s;
  }

  .ending-tag{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:2px 10px 3px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.2);
    font-size:.72rem;
    color:#f3ece3;
    background:rgba(0,0,0,.25);
    margin-bottom:6px;
  }
  .ending-tag span:first-child{
    font-weight:600;
  }
  .ending-tag strong{
    color:var(--accent);
    font-weight:700;
  }

  .ending-title{
    margin:0 0 4px;
    font-size:1rem;
    font-weight:700;
  }
  .ending-desc{
    margin:0;
    font-size:.88rem;
    color:var(--muted);
    line-height:1.7;
  }

  /* ì—”ë”© íƒ€ì… íƒœê·¸ */
  .ending-kind{
    margin-top:6px;
    display:inline-flex;
    padding:2px 10px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.24);
    font-size:.7rem;
    letter-spacing:.12em;
    text-transform:uppercase;
    color:#f5e6d0;
    background:rgba(0,0,0,.35);
    opacity:.9;
  }

  /* ì„ íƒ íë¦„ */
  .ending-path{
    margin:6px 0 0;
    font-size:.78rem;
    color:#998f86;
  }
  .ending-row.locked .ending-path{
    color:#6b6258;
    letter-spacing:.04em;
  }

  /* ì ê¸´ ì—”ë”© íŒíŠ¸ */
  .ending-hint{
    margin-top:4px;
    font-size:.75rem;
    color:#7f756b;
    font-style:italic;
  }

  .ending-row.unlocked .ending-card{
    border-color:rgba(255,179,107,.7);
    box-shadow:
      0 18px 40px rgba(0,0,0,.95),
      0 0 26px rgba(255,96,80,.38);
  }
  .ending-row.unlocked .ending-title{
    color:#fff8ee;
  }

  /* ì ê¸ˆ ìƒíƒœ */
  .ending-row.locked .ending-card{
    border-style:dashed;
    border-color:rgba(255,255,255,.16);
    background:linear-gradient(135deg,#120a0d,#070506);
    color:#857b71;
  }
  .ending-row.locked .ending-title{
    letter-spacing:.24em;
  }
  .ending-row.locked .ending-desc{
    font-style:italic;
    color:#6b6258;
  }

  /* âœ… í´ë¦­ ê°€ëŠ¥í•œ(í•´ê¸ˆëœ + route ìˆëŠ”) ì—”ë”© í˜¸ë²„ íš¨ê³¼ */
  .ending-row.clickable{
    cursor:pointer;
  }
  .ending-row.clickable:hover .ending-card{
    border-color:var(--accent-yellow);
    box-shadow:
      0 20px 46px rgba(0,0,0,.98),
      0 0 28px rgba(255,215,94,.45);
    transform:translateY(-2px);
  }

  /* ë°˜ì‘í˜• */
  @media (max-width:720px){
    header{padding:18px 16px 4px;}
    .back-btn,.reset-btn{display:none;}
    .status-bar{padding:0 16px;}
    main{padding:10px 16px 32px;}
    .timeline{left:64px;}
    .ending-row{gap:12px;}
    .ending-chip{flex:0 0 96px;}
  }
</style>
</head>

<body>
  <header>
    <!-- í…ŒìŠ¤íŠ¸ìš© ë¦¬ì…‹ ë²„íŠ¼ -->
    <button class="reset-btn" onclick="resetEndings()">reset endings</button>
    <!-- ëª¨ë“  ì—”ë”© ê°•ì œ í•´ê¸ˆ ë²„íŠ¼ -->
    <button class="reset-btn unlock-btn" onclick="unlockAllEndings()">unlock all</button>
  
    <div class="title-wrap">
      <div class="title-main">BANDERSNATCH</div>
      <div class="title-sub">ENDING ARCHIVE / ì—”ë”© ëª¨ìŒì§‘</div>
    </div>

    <button class="back-btn" onclick="location.href='index.html'">
      â† ë’¤ë¡œê°€ê¸°
    </button>
  </header>

  <section class="status-bar">
    <div class="status-left">
      <span class="status-dot"></span>
      <span id="endingProgress">UNLOCKED 0/0</span>
    </div>
    <div class="status-right">
      <span>YEAR: 1984</span>
      <span>MEDIUM: INTERACTIVE</span>
    </div>
  </section>

  <main>
    <div class="timeline"></div>
    <div class="ending-list" id="endingList">
      <!-- JSë¡œ ì—”ë”© ì¤„ ìƒì„± -->
    </div>
  </main>

<script>
/* ===== ì—”ë”© ë©”íƒ€ë°ì´í„° ===== */
const ENDINGS = [
  {
    id:'ENDING_A',
    code:'A',
    title:'ê¸°ì–µì˜ ì¡°ê° ì™„ì„±',
    desc:'ë„ì‚´ì ì‚¬ê±´ì˜ í¼ì¦ì„ ëª¨ë‘ ë§ì¶”ê³ , ì™œê³¡ëœ ê¸°ì–µê³¼ ì§ì ‘ ë§ˆì£¼í•˜ëŠ” ì§„ì‹¤ ì—”ë”©.',
    route:'ending_A.html',          // A ì—”ë”© ë””í…Œì¼ í˜ì´ì§€
    kind:'truth',
    path:['í”„ë¡¤ë¡œê·¸', 'ì‚¬ê±´ì— ê°œì…í•˜ê¸°', 'ì¦ê±°ë¥¼ ìˆ¨ê¸°ì§€ ì•ŠëŠ”ë‹¤', 'ê¸°ì–µì„ ì§ë©´í•œë‹¤'],
    hint:'ì´ˆë°˜ë¶€í„° ì‚¬ê±´ì— ì ê·¹ì ìœ¼ë¡œ ê°œì…í•˜ëŠ” ì„ íƒë“¤ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.'
  },
  {
    id:'ENDING_B',
    code:'B',
    title:'ëë‚˜ì§€ ì•ŠëŠ” ë°¤',
    desc:'í˜„ì‹¤ê³¼ ê²Œì„, í™˜ê°ì˜ ê²½ê³„ê°€ ì™„ì „íˆ ë¬´ë„ˆì ¸ ë£¨í”„ ì†ì„ ì˜ì›íˆ ë§´ë„ëŠ” ì—”ë”©.',
    route:'ending_B.html',
    kind:'bad',
    path:['í”„ë¡¤ë¡œê·¸', 'ì‚¬ê±´ì„ ì™¸ë©´í•œë‹¤', 'ë„í”¼í•˜ëŠ” ì„ íƒ ë°˜ë³µ'],
    hint:'ì²˜ìŒ ì‚¬ê±´ì„ ê·¸ëƒ¥ ë„˜ê¸°ê³ , ì´í›„ì—ë„ íšŒí”¼ ìª½ ì„ íƒì„ ê³ ë¥´ë©´ ì´ ì—”ë”©ì— ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤.'
  },
  {
    id:'ENDING_C',
    code:'C',
    title:'ë§ˆì§€ë§‰ ì„ íƒ',
    desc:'ëˆ„êµ°ê°€ë¥¼ ì§€í‚¤ê¸° ìœ„í•´ ìì‹ ì„ í¬ìƒí•˜ê³ , ê²Œì„ì€ ë¯¸ì™„ì„±ìœ¼ë¡œ ë‚¨ëŠ” ì—”ë”©.',
    route:'ending_C.html',
    kind:'sac',
    path:['í”„ë¡¤ë¡œê·¸', 'ì‚¬ê±´ì— ê°œì…', 'ìì‹ ì„ í¬ìƒí•˜ëŠ” ì„ íƒ'],
    hint:'í´ë¼ì´ë§¥ìŠ¤ì—ì„œ â€œìì‹ ì„ ë²„ë¦¬ëŠ” ì„ íƒâ€ì„ ê³ ë¥´ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.'
  },
  {
    id:'ENDING_D',
    code:'D',
    title:'ì¡°ì‘ìì—ê²Œ ì¸ì‚¬í•˜ê¸°',
    desc:'ì´ ì„¸ê³„ê°€ ì¸í„°ë™í‹°ë¸Œ ì½˜í…ì¸ ë¼ëŠ” ì‚¬ì‹¤ì„ ê¹¨ë‹«ê³  â€œìœ„ì—ì„œ ë³´ëŠ” ì¡´ì¬â€ì™€ ì§ì ‘ ëŒ€ë©´í•˜ëŠ” ë©”íƒ€ ì—”ë”©.',
    route:'ending_D.html',
    kind:'meta',
    path:['í”„ë¡¤ë¡œê·¸', 'ì´ìƒí•œ ë©”ì‹œì§€ ìˆ˜ì‹ ', 'í˜„ì‹¤ì„ ì˜ì‹¬í•˜ëŠ” ì„ íƒë“¤'],
    hint:'â€œì´ê²Œ ê²Œì„ ê°™ë‹¤â€ë¼ëŠ” ë‰˜ì•™ìŠ¤ì˜ ì„ íƒë“¤ì„ ê¾¸ì¤€íˆ ê³ ë¥´ë©´ ë„ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
  }
];

/* localStorage í•´ê¸ˆ ì—¬ë¶€ */
function isUnlocked(id){
  return localStorage.getItem('ending:' + id) === '1';
}

const listEl = document.getElementById('endingList');
const progressEl = document.getElementById('endingProgress');

function renderEndings(){
  listEl.innerHTML = '';
  let unlockedCount = 0;

  ENDINGS.forEach((e, idx) => {
    const unlocked = isUnlocked(e.id);
    if(unlocked) unlockedCount++;

    const row = document.createElement('article');
    row.className = 'ending-row ' + (unlocked ? 'unlocked' : 'locked');
    row.dataset.id = e.id;

    const chip = document.createElement('div');
    chip.className = 'ending-chip';
    chip.innerHTML = `
      <div class="chip-label">ENDING</div>
      <div class="chip-code">${e.code}</div>
    `;

    const card = document.createElement('div');
    card.className = 'ending-card';

    const tag = document.createElement('div');
    tag.className = 'ending-tag';
    tag.innerHTML = `
      <span>${String(idx+1).padStart(2,'0')}</span>
      <span>STATUS: <strong>${unlocked ? 'UNLOCKED' : 'LOCKED'}</strong></span>
    `;
    card.appendChild(tag);

    const title = document.createElement('h2');
    title.className = 'ending-title';
    title.textContent = unlocked ? e.title : 'ï¼Ÿï¼Ÿï¼Ÿ';
    card.appendChild(title);

    const desc = document.createElement('p');
    desc.className = 'ending-desc';
    desc.textContent = unlocked
      ? e.desc
      : 'ì•„ì§ ë„ë‹¬í•˜ì§€ ëª»í•œ ì—”ë”©ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë¶„ê¸°ì™€ ì„ íƒì„ ì‹œë„í•´ë³´ì„¸ìš”.';
    card.appendChild(desc);

    // ì—”ë”© íƒ€ì… íƒœê·¸
    if (e.kind){
      const kind = document.createElement('div');
      kind.className = 'ending-kind';
      let label = '';
      if(e.kind === 'truth') label = 'TRUTH / ì§„ì‹¤ ì—”ë”©';
      if(e.kind === 'bad')   label = 'BAD / ë£¨í”„ ì—”ë”©';
      if(e.kind === 'sac')   label = 'SACRIFICE / í¬ìƒ ì—”ë”©';
      if(e.kind === 'meta')  label = 'META / ë©”íƒ€ ì—”ë”©';
      kind.textContent = label;
      card.appendChild(kind);
    }

    // ì„ íƒ íë¦„
    if (e.path && e.path.length){
      const path = document.createElement('p');
      path.className = 'ending-path';
      path.textContent = unlocked
        ? 'ì£¼ìš” ì„ íƒ íë¦„: ' + e.path.join(' â†’ ')
        : 'ì£¼ìš” ì„ íƒ íë¦„: ??? â†’ ??? â†’ ???';
      card.appendChild(path);
    }

    // ì ê¸´ ì—”ë”© íŒíŠ¸
    if (!unlocked && e.hint){
      const hint = document.createElement('p');
      hint.className = 'ending-hint';
      hint.textContent = 'íŒíŠ¸: ' + e.hint;
      card.appendChild(hint);
    }

    row.appendChild(chip);
    row.appendChild(card);

    // ğŸ”— í•´ê¸ˆ + route ìˆìœ¼ë©´ í´ë¦­ ì‹œ í˜ì´ì§€ ì´ë™ + hover íš¨ê³¼
    if (unlocked && e.route) {
      row.classList.add('clickable');
      row.onclick = () => {
        location.href = e.route;
      };
    }

    listEl.appendChild(row);
  });

  progressEl.innerHTML =
    `UNLOCKED <strong>${unlockedCount}/${ENDINGS.length}</strong>`;
}

/* ì „ì²´ ì—”ë”© ë¦¬ì…‹ */
function resetEndings(){
  ENDINGS.forEach(e => localStorage.removeItem('ending:' + e.id));
  renderEndings();
}

/* ì „ì²´ ì—”ë”© ê°•ì œ í•´ê¸ˆ (ê³¼ì œ ì‹œì—°ìš©) */
function unlockAllEndings(){
  ENDINGS.forEach(e => localStorage.setItem('ending:' + e.id, '1'));
  renderEndings();
}

/* ì´ˆê¸° ë Œë” */
document.addEventListener('DOMContentLoaded', renderEndings);
</script>
</body>
</html>
