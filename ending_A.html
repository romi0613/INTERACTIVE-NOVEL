<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ENDING A — 기억의 조각 완성</title>

  <!-- 폰트 -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/>

  <style>
    :root{
      --bg:#050307;
      --ink:#f5f0e6;
      --muted:#b8a9a0;
      --accent:#ffb36b;
      --accent-soft:#ffd8a0;
      --stroke:#ffffff22;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(circle at 0% 0%, #3b1c24 0, #050307 40%, #020103 100%);
      color:var(--ink);
      font-family:'Pretendard Variable',Pretendard,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .wrap{
      width:min(960px, 96vw);
      max-height:92vh;
      border-radius:20px;
      border:1px solid var(--stroke);
      background:
        radial-gradient(circle at 0% 0%, #3b1c24 0, #0a050b 45%, #050308 100%);
      box-shadow:
        0 24px 90px rgba(0,0,0,.9),
        0 0 40px rgba(255,150,80,.15);
      padding:22px clamp(20px,3.2vw,30px);
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }

    /* 상단 타이틀 영역 */
    .top{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:18px;
      margin-bottom:14px;
    }

    /* BANDERSNATCH 로고(두번째 파일 스타일) */
    .logo{
      position:relative;
      font-family:'Share Tech Mono',monospace;
      font-size:clamp(13px,1.5vw,17px);
      letter-spacing:.48em;
      text-transform:uppercase;
      color:#ffe8b6;
      text-shadow:
        0 0 6px rgba(255,220,150,.9),
        0 0 18px rgba(255,120,80,.6);
      padding-left:.5em;
      white-space:nowrap;
    }
    .logo::before{
      content:"BANDERSNATCH";
      position:absolute;
      left:.5em;
      top:-1px;
      pointer-events:none;
      color:rgba(255,140,120,.68);
      mix-blend-mode:screen;
      transform:translateX(1px);
      opacity:.6;
    }
    .logo::after{
      content:"ENDING ARCHIVE";
      position:absolute;
      left:.52em;
      top:160%;
      font-family:'Pretendard Variable',system-ui;
      font-size:.7rem;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:var(--muted);
    }

    .ending-tag{
      text-align:right;
      font-size:.78rem;
      color:var(--muted);
      letter-spacing:.18em;
      text-transform:uppercase;
    }
    .ending-tag strong{
      display:block;
      font-size:.86rem;
      letter-spacing:.22em;
      color:var(--accent-soft);
    }

    /* 본문 패널 */
    .panel{
      flex:1;
      border-radius:14px;
      border:1px solid #ffffff1f;
      background:radial-gradient(circle at 15% 0%, #3a2622 0, #120910 38%, #070509 100%);
      padding:20px clamp(18px,3vw,26px) 18px;
      display:flex;
      flex-direction:column;
      overflow:auto;
    }

    .eyebrow{
      font-size:.78rem;
      letter-spacing:.28em;
      text-transform:uppercase;
      color:var(--muted);
      margin-bottom:4px;
    }
    h1{
      margin:0 0 6px;
      font-size:1.55rem;
      color:var(--accent);
    }
    .meta{
      font-size:.8rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      color:#d6c9c0;
      margin-bottom:16px;
    }

    .summary{
      font-size:.96rem;
      line-height:1.9;
      color:var(--ink);
    }
    .summary p{margin:.4em 0;}
    .summary p.lead{
      font-size:1.02rem;
      color:#f9efe3;
    }

    /* 선택 경로 멘트(첫번째 파일의 로직 유지: path 전체를 화살표로 표시) */
    #routeText{
      margin-top:10px;
      font-size:.9rem;
      line-height:1.7;
      color:var(--muted);
    }

    /* 디테일 블럭들 */
    .detail-grid{
      margin-top:18px;
      display:grid;
      grid-template-columns:1.3fr 1fr;
      gap:18px;
      font-size:.9rem;
    }
    .detail-block{
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(3,0,0,.35);
      padding:12px 14px;
    }
    .detail-block.full{
      margin-top:14px;
      grid-column:1 / -1;
    }

    .subhead{
      margin:0 0 6px;
      font-size:.82rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#f0dfce;
    }

    .choice-list,
    .hint-list{
      margin:4px 0 0;
      padding-left:1.1em;
      list-style:disc;
      color:var(--muted);
      font-size:.86rem;
      line-height:1.7;
    }
    .choice-list li + li,
    .hint-list li + li{
      margin-top:2px;
    }

    /* 버튼 영역 */
    .buttons{
      margin-top:22px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .btn{
      border-radius:999px;
      padding:8px 18px;
      font-size:.85rem;
      letter-spacing:.04em;
      cursor:pointer;
      border:1px solid #ffffff33;
      background:transparent;
      color:var(--ink);
      display:inline-flex;
      align-items:center;
      gap:6px;
      text-decoration:none;
    }
    .btn.primary{
      background:var(--accent);
      border-color:var(--accent);
      color:#1b0d0b;
      font-weight:600;
    }
    .btn span.icon{font-size:.9rem;}
    .btn:hover{
      border-color:var(--accent);
      box-shadow:0 0 18px rgba(255,179,107,.45);
    }

    .note{
      margin-top:12px;
      font-size:.78rem;
      color:var(--muted);
    }

    @media (max-width:640px){
      body{padding:12px;}
      .wrap{padding:18px;}
      .top{
        flex-direction:column;
        align-items:flex-start;
        gap:4px;
      }
      .ending-tag{text-align:left;}
      .detail-grid{grid-template-columns:1fr;}
      .logo::after{top:150%;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- 상단 타이틀 / 엔딩 태그 -->
    <div class="top">
      <div class="logo">BANDERSNATCH</div>
      <div class="ending-tag">
        <span>INTERACTIVE NOVEL</span>
        <strong>ENDING A · TRUTH</strong>
      </div>
    </div>

    <!-- 본문 패널 -->
    <section class="panel">
      <div class="eyebrow">ENDING A</div>
      <h1>기억의 조각 완성</h1>
      <div id="metaLine" class="meta">STATUS · UNLOCKED · ROUTE DEPTH : —</div>

      <div class="summary">
        <p class="lead">
          당신은 이 이야기가 남의 사건이 아니라, 오래전부터 당신의 기억과 겹쳐져 있었다는 사실을 받아들인다.
        </p>
        <p>
          기사와 영상, 증언과 추측으로 흩어져 있던 조각들은 결국 하나의 그림으로 수렴한다.
          화면 속 문장과 머릿속 장면이 정확히 겹쳐지는 순간, 당신은 더 이상 ‘관객’이 아니라
          이야기의 공범이자 증인이 된다.
        </p>
        <p>
          말하지 않고 지나친 것들, 기록되지 못한 순간들, “그때는 별일 아니라고 생각했다”라고
          넘겨버렸던 장면들까지 모두 이 밤의 일부였다는 것을 알게 되었기 때문이다.
        </p>
        <p>
          그래서 당신은 탭을 닫는 대신, 타임라인을 다시 쓰기 시작한다.
          누군가에게 보여 주기 위한 멋진 결론이 아니라, 스스로 다시 읽어 볼 수 있는 문장들로.
          지우고, 고치고, 덧붙이면서도 손은 더 이상 크게 망설이지 않는다.
        </p>
        <p>
          이 엔딩에서 이야기는 단순히 ‘끝’나지 않는다.
          오히려 지금부터가 시작이다. “나는 알고 있다”라는 자각 위에서,
          당신은 다음 밤을 완전히 다른 방식으로 맞이하게 될 것이다.
        </p>

        <!-- ✅ 첫번째 파일의 path 로직 유지: 전체 경로를 표시 -->
        <p id="routeText"></p>
      </div>

      <!-- 선택 요약 / 엔딩 의미 / 다른 엔딩 힌트 -->
      <div class="detail-grid">
        <section class="detail-block">
          <h2 class="subhead">YOUR KEY CHOICES</h2>
          <ul class="choice-list" id="choiceList"></ul>
        </section>

        <section class="detail-block">
          <h2 class="subhead">WHAT THIS ENDING MEANS</h2>
          <p style="margin:0; font-size:.88rem; line-height:1.7; color:var(--muted);">
            이 엔딩에서 주인공은 “무슨 일이었는지 이해한 사람”이 아니라
            <strong>“알고도 뒤돌아설 수 없었던 사람”</strong>으로 남습니다.
            진실을 본 대가로, 평범한 일상으로 돌아갈 수 있는 가능성은 거의 사라집니다.
            대신, 당신이 쌓아온 선택의 경로는 <em>지난 선택</em> 화면에서 다시 확인할 수 있습니다.
          </p>
        </section>
      </div>

      <section class="detail-block full">
        <h2 class="subhead">IF YOU HAD CHOSEN DIFFERENTLY…</h2>
        <ul class="hint-list">
          <li>초반에 사건을 <strong>그냥 넘겨버리는 선택</strong>을 반복했다면, 루프형 엔딩(예: ENDING B)에 가까워졌을 수 있습니다.</li>
          <li>클라이맥스에서 <strong>다른 사람을 지키는 선택</strong>을 끝까지 밀어붙였다면, 희생을 전제로 한 엔딩(예: ENDING C)로 갈 가능성이 높습니다.</li>
          <li>도중에 “이게 게임 같다”, “누가 위에서 조종하는 기분” 같은 <strong>메타적인 선택</strong>을 집요하게 골랐다면, 다른 방향의 엔딩(예: ENDING D)으로 이어질 수도 있습니다.</li>
        </ul>
      </section>

      <!-- 버튼들 -->
      <div class="buttons">
        <button class="btn primary" onclick="location.href='Start.html'">
          <span class="icon">↺</span>
          처음부터 다시 시작
        </button>
        <a class="btn" href="지난선택.html">
          <span class="icon">☷</span>
          지난 선택 보기
        </a>
        <a class="btn" href="참고.html">
          <span class="icon">✦</span>
          엔딩 모음집
        </a>
      </div>

      <div class="note">
        이 엔딩을 보면 <strong>ENDING A</strong>가 자동으로 해금되어
        <em>지난 선택</em> 화면과 <em>엔딩 모음집</em>에서 확인할 수 있습니다.
      </div>
    </section>
  </div>

  <script>
    // URL 파라미터 읽기
    function getParam(name){
      const params = new URLSearchParams(location.search);
      return params.get(name);
    }

    // (선택) A/B 등 문자 선택을 사람이 읽기 쉬운 문장으로 바꾸고 싶으면 여기만 수정하면 됨
    // 예) const LABEL = { A: "책을 챙긴다", B: "책을 두고 간다" };
    const LABEL = null;

    document.addEventListener('DOMContentLoaded', () => {
      // ✅ 엔딩 A 해금 기록 (지난선택 / endings.html에서 사용)
      try{ localStorage.setItem('ending:ENDING_A','1'); }catch(e){}

      const path = (getParam('path') || '').trim();   // 첫번째 파일 로직: path 전체를 그대로 사용
      const routeText = document.getElementById('routeText');
      const choiceListEl = document.getElementById('choiceList');
      const metaLine = document.getElementById('metaLine');

      const depth = path ? path.length : 0;
      if(metaLine){
        metaLine.textContent = `STATUS · UNLOCKED · ROUTE DEPTH : ${depth}`;
      }

      if(routeText){
        if(path){
          const pretty = path.split('').join(' → ');
          routeText.textContent = `이번 플레이에서 당신은 ${pretty} 순서로 선택해 이 엔딩에 도달했습니다.`;
        }else{
          routeText.textContent = '이번 플레이의 선택 경로가 기록되지 않았습니다.';
        }
      }

      if(choiceListEl){
        if(!path){
          choiceListEl.innerHTML = '<li>선택 기록이 없습니다. (path 파라미터가 비어있음)</li>';
        }else{
          const items = path.split('').map((ch, i) => {
            const label = (LABEL && LABEL[ch]) ? LABEL[ch] : ch;
            return `<li>${i+1}번째 선택: <strong>${label}</strong></li>`;
          });
          choiceListEl.innerHTML = items.join('');
        }
      }
    });
  </script>
</body>
</html>
