<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>선택 01 — 책을 챙길까?</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"/>

<style>
  :root{
    --ink:#fff;
    --accent:#ffffff;
    --stroke:#ffffff22;
    --choice-bg: rgba(10,10,10,.72);
    --choice-hover: rgba(18,18,18,.9);

    /* 크기/간격 변수 (여기만 조절하면 전체가 따라 바뀜) */
    --hud-pad: 48px;                           /* 하단 HUD 패딩 */
    --hud-maxw: min(1280px, 94vw);             /* HUD 내부 최대폭 */
    --timer-h: 12px;                           /* 타이머 높이 */

    --choice-height: clamp(96px, 12vh, 150px); /* 버튼 높이 */
    --choice-font: clamp(20px, 2.6vw, 26px);   /* 버튼 글자 크기 */
    --choice-radius: 12px;                     /* 버튼 라운드 */
    --choice-gap: 18px;                        /* 버튼 간격 */
    --choice-padx: 24px;                       /* 버튼 좌우 패딩 */
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:#000; color:var(--ink);
    font-family:'Pretendard Variable','Pretendard',system-ui,Apple SD Gothic Neo,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    overflow:hidden;
  }

  /* ===== 화면(풀화면 배경) ===== */
  .stage{position:fixed; inset:0; display:grid; place-items:stretch}
  .bg{
    position:absolute; inset:0;
    background:url('선택1.png') center/cover no-repeat;
    filter:contrast(1.02) saturate(.98) brightness(.94);
    transform:scale(1.02);
    animation:slowPan 26s ease-in-out infinite alternate;
  }
  @keyframes slowPan{
    0%{transform:scale(1.04) translate(0,0)}
    100%{transform:scale(1.04) translate(-0.8%, 0.6%)}
  }
  .vignette{position:absolute; inset:0; pointer-events:none;
    background:
      radial-gradient(120% 100% at 50% 100%, rgba(0,0,0,0) 48%, rgba(0,0,0,.6) 100%),
      radial-gradient(100% 100% at 50% 50%, rgba(0,0,0,0) 60%, rgba(0,0,0,.5) 100%);
  }
  .scan{position:absolute; inset:0; pointer-events:none; mix-blend-mode:overlay; opacity:.08;
    background:repeating-linear-gradient(180deg, rgba(255,255,255,.08) 0 2px, transparent 2px 4px);
    animation:scan 9s linear infinite;
  }
  @keyframes scan{to{background-position-y:200px}}

  /* ===== 하단 선택 HUD ===== */
  .hud{
    position:absolute; left:0; right:0; bottom:0; z-index:2;
    padding: var(--hud-pad) var(--hud-pad) calc(var(--hud-pad) + env(safe-area-inset-bottom));
    background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.55) 28%, rgba(0,0,0,.75) 100%);
    backdrop-filter:blur(2px);
  }

  /* 타이머 (양쪽→가운데 축소) */
  .timer-wrap{max-width: var(--hud-maxw); margin:0 auto 16px; position:relative;}
  .timer{
    height:var(--timer-h);
    border:1px solid #ffffff33;
    background:rgba(255,255,255,.06);
    position:relative; overflow:hidden; border-radius:999px;
  }
  .timer > span{
    position:absolute; left:0; right:0; top:0; bottom:0;
    background:linear-gradient(90deg, rgba(255,255,255,.20) 0%, rgba(255,255,255,.10) 50%, rgba(255,255,255,.20) 100%);
    opacity:.55; box-shadow:0 0 14px rgba(255,255,255,.25);
    transform-origin:center center; transform:scaleX(1);
  }
  .tick{
    position:absolute; right:0; top:calc(-26px - (var(--timer-h) - 10px));
    font-size:12px; color:#e8f0ff; opacity:.9; letter-spacing:.04em;
  }

  /* 선택지 바 */
  .choices{
    max-width: var(--hud-maxw); margin:0 auto;
    display:grid; grid-template-columns:1fr 1fr; gap: var(--choice-gap);
  }
  .choice{
    position:relative; display:flex; align-items:center; justify-content:center;
    height: var(--choice-height); padding: 0 var(--choice-padx);
    background:var(--choice-bg);
    border:1px solid var(--stroke); border-radius: var(--choice-radius);
    color:#eee; font-size: var(--choice-font); letter-spacing:.02em; cursor:pointer;
    transition:.18s ease; text-transform:uppercase; outline:none;
  }
  .choice:hover, .choice:focus{background:var(--choice-hover); border-color:#ffffff55; transform:translateY(-1px)}
  .choice.active{box-shadow:0 0 0 2px var(--accent) inset;}
  .choice small{position:absolute; top:10px; left:12px; font-size:12px; opacity:.7}
  .choice:focus-visible{outline:2px solid var(--accent); outline-offset:2px}

  /* 모바일 */
  @media (max-width:720px){
    .choices{ grid-template-columns: 1fr; }
    .choice{ height: clamp(84px, 12vh, 140px); font-size: clamp(18px, 2.2vw, 22px); }
  }
</style>
</head>
<body>
  <main class="stage" role="application" aria-label="선택 화면">
    <div class="bg" aria-hidden="true"></div>
    <div class="vignette" aria-hidden="true"></div>
    <div class="scan" aria-hidden="true"></div>

    <section class="hud">
      <div class="timer-wrap">
        <div class="timer" aria-label="남은 시간">
          <span id="bar"></span>
          <div class="tick"><span id="secs">10.0</span>s</div>
        </div>
      </div>

      <div class="choices" role="listbox" aria-label="선택지">
        <button class="choice active" id="optA" role="option" aria-selected="true">
          <small>선택 A</small> 책을 챙긴다
        </button>
        <button class="choice" id="optB" role="option" aria-selected="false">
          <small>선택 B</small> 책을 챙기지 않는다
        </button>
      </div>
    </section>
  </main>

<script>
  /* ===== 설정 ===== */
  const DURATION = 10000;      // 10초
  const AUTO_DEFAULT = 'A';    // 시간초과 기본 선택

  /* ===== 라우팅: Start.html 로 복귀 (+ 선택값) ===== */
  function route(which){
    location.href = `Start.html?choice=${which}`;  // 'A' | 'B'
  }

  /* ===== 타이머 ===== */
  const bar  = document.getElementById('bar');
  const secs = document.getElementById('secs');
  const t0   = performance.now();
  let raf = null, finished = false, focused = 'A';

  function tick(t){
    if(finished) return;
    const p = Math.min(1, (t - t0) / DURATION);
    const remain = Math.max(0, DURATION - (t - t0));
    bar.style.transform = `scaleX(${1 - p})`;           // 가운데 기준 축소
    secs.textContent = (remain/1000).toFixed(1);
    if(p >= 1){ choose(AUTO_DEFAULT); return; }
    raf = requestAnimationFrame(tick);
  }
  raf = requestAnimationFrame(tick);

  /* ===== 선택지 ===== */
  const optA = document.getElementById('optA');
  const optB = document.getElementById('optB');

  function setFocus(which){
    focused = which;
    if(which==='A'){
      optA.classList.add('active'); optA.setAttribute('aria-selected','true');
      optB.classList.remove('active'); optB.setAttribute('aria-selected','false');
      optA.focus({preventScroll:true});
    }else{
      optB.classList.add('active'); optB.setAttribute('aria-selected','true');
      optA.classList.remove('active'); optA.setAttribute('aria-selected','false');
      optB.focus({preventScroll:true});
    }
  }

  function choose(which){
    if(finished) return;
    finished = true; cancelAnimationFrame(raf);
    const el = which==='A'?optA:optB;
    el.style.boxShadow = '0 0 0 2px var(--accent) inset, 0 0 24px #000';
    el.style.transform = 'translateY(-2px) scale(1.01)';
    setTimeout(()=>route(which), 220);
  }

  optA.addEventListener('click', ()=>choose('A'));
  optB.addEventListener('click', ()=>choose('B'));
  optA.addEventListener('mouseenter',()=>setFocus('A'));
  optB.addEventListener('mouseenter',()=>setFocus('B'));

  // ←/→ 포커스, Space/Enter 확정
  window.addEventListener('keydown', (e)=>{
    if(finished) return;
    if(['ArrowLeft','a','A','1'].includes(e.key)){ e.preventDefault(); setFocus('A'); }
    if(['ArrowRight','d','D','2'].includes(e.key)){ e.preventDefault(); setFocus('B'); }
    if(e.key===' '||e.key==='Enter'){ e.preventDefault(); choose(focused); }
  }, {passive:false});

  // 접근성 보조
  optA.addEventListener('focus', ()=>setFocus('A'));
  optB.addEventListener('focus', ()=>setFocus('B'));


  
</script>
</body>
</html>
